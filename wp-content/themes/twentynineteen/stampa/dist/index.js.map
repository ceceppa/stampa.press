{"version":3,"sources":["components/StampaMediaUpload.js","components/StampaPostSelector.js","components/stampa-components.js","blocks/test-image-new.js","index.js"],"names":["__","wp","i18n","MediaUpload","editor","IconButton","components","StampaMediaUpload","fieldName","image","attributes","updateAttribute","updateFocusedField","object_fit","object_position","replace","customClass","url","e","id","open","StampaPostSelector","focusedField","useCallback","window","React","registerBlockType","blocks","InspectorControls","PanelBody","PanelRow","SelectControl","ToggleControl","TextControl","element","Fragment","Component","allFieldsOptions","name","type","label","values","value","fieldOptionsComponents","select","checkbox","text","title","icon","category","keywords","multiple","default","edit","className","setAttributes","fieldOptions","field","attribute","length","stopPropagation","__focused","map","option","attributeKey","display","gridTemplateColumns","gridTemplateRows","gridGap","height","gridRowStart","gridColumnStart","gridRowEnd","gridColumnEnd","save"],"mappings":"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","file":"index.js","sourceRoot":"..","sourcesContent":["const { __ } = wp.i18n;\nconst { MediaUpload } = wp.editor;\nconst { IconButton } = wp.components;\n\nexport default function StampaMediaUpload({\n  fieldName,\n  image,\n  attributes,\n  updateAttribute,\n  updateFocusedField,\n}) {\n  const object_fit = attributes[`${fieldName}__fit`];\n  const object_position = attributes[`${fieldName}__position`].replace(\n    ' ',\n    '-'\n  );\n\n  let customClass = image && image.url ? 'has-image' : 'wireframe';\n  customClass += ` object-fit--${object_fit} object-position--${object_position}`;\n\n  return (\n    <div\n      className=\"stampa-media-upload\"\n      onClick={e => updateFocusedField(e, fieldName)}\n    >\n      <img\n        className={`stampa-field__image ${customClass}`}\n        src={image && image.url}\n      />\n      {image == null &&\n        <svg\n          className=\"image-wireframe\"\n          viewBox=\"0 0 24 24\"\n          xmlns=\"http://www.w3.org/2000/svg\"\n          role=\"img\"\n          aria-hidden=\"true\"\n          focusable=\"false\"\n        >\n          <path d=\"M0,0h24v24H0V0z\" fill=\"none\" />\n          <path d=\"m19 5v14h-14v-14h14m0-2h-14c-1.1 0-2 0.9-2 2v14c0 1.1 0.9 2 2 2h14c1.1 0 2-0.9 2-2v-14c0-1.1-0.9-2-2-2z\" />\n          <path d=\"m14.14 11.86l-3 3.87-2.14-2.59-3 3.86h12l-3.86-5.14z\" />\n        </svg>}\n      <MediaUpload\n        className=\"media-upload\"\n        value={image}\n        placeholder=\"{{stampa.value.placeholder}}\"\n        onSelect={image =>\n          updateAttribute(fieldName, { url: image.url, id: image.id })}\n        render={({ open }) => (\n          <IconButton\n            className={`button add ${image && image.url ? 'round' : ''}`}\n            label={__('Media')}\n            icon=\"format-image\"\n            onClick={open}\n          >\n            <span>Select image</span>\n          </IconButton>\n        )}\n      />\n      {image &&\n        <IconButton\n          className=\"button round remove\"\n          label={__('Remove')}\n          icon=\"no\"\n          onClick={() => updateAttribute(fieldName, null)}\n        >\n          <span>Remove Image</span>\n        </IconButton>}\n    </div>\n  );\n}\n","const { __ } = wp.i18n;\nconst { MediaUpload } = wp.editor;\nconst { IconButton } = wp.components;\n\nexport default function StampaPostSelector({\n  fieldName,\n  image,\n  attributes,\n  updateAttribute,\n  updateFocusedField,\n}) {}\n","import StampaMediaUpload from './StampaMediaUpload';\nimport StampaPostSelector from './StampaPostSelector';\n\nexport { StampaMediaUpload, StampaPostSelector };\n","/**\n * BLOCK: Test image new\n *\n */\n// Stampa Components\nimport { StampaMediaUpload } from \"../components/stampa-components\";\n\nconst useCallback = window.React.useCallback;\nconst { __ } = wp.i18n;\nconst { registerBlockType } = wp.blocks;\nconst { InspectorControls, MediaUpload } = wp.editor;\nconst {\n  PanelBody,\n  PanelRow,\n  SelectControl,\n  ToggleControl,\n  TextControl\n} = wp.components;\nconst { Fragment, Component } = wp.element;\n\nconst allFieldsOptions = {\n  \"post-selector\": [],\n  \"post-title\": [\n    {\n      name: \"level\",\n      type: \"select\",\n      label: \"Level\",\n      values: [\"h1\", \"h2\", \"h3\", \"h4\", \"h5\", \"h6\"],\n      value: \"h3\"\n    }\n  ]\n};\nconst fieldOptionsComponents = {\n  select: SelectControl,\n  checkbox: ToggleControl,\n  text: TextControl\n};\nlet focusedField;\n\nregisterBlockType(\"stampa/test-image-new\", {\n  title: __(\"Test image new\"),\n  icon: \"controls-repeat\",\n  category: \"stampa-blocks\",\n  keywords: [],\n\n  multiple: true,\n\n  attributes: { \"post-title__level\": { type: \"string\", default: \"h3\" } },\n\n  edit({ className, attributes = {}, setAttributes }) {\n    const fieldOptions = allFieldsOptions[focusedField];\n\n    const updateAttribute = useCallback((field, value) => {\n      const attribute = {};\n      attribute[field] = value;\n\n      setAttributes(attribute);\n    });\n\n    const updateFocusedField = useCallback((e, fieldName) => {\n      if (fieldName.length) {\n        e.stopPropagation();\n      }\n\n      focusedField = fieldName;\n\n      setAttributes({ __focused: fieldName });\n    });\n\n    return (\n      <Fragment>\n        <InspectorControls>\n          {fieldOptions && (\n            <PanelBody title={__(\"Options\")} className=\"typed-panel-body\">\n              {fieldOptions.map(option => {\n                const Component = fieldOptionsComponents[option.type];\n                const attributeKey = `${focusedField}__${option.name}`;\n                const values = option.values || [];\n\n                return (\n                  <PanelRow key={option.name}>\n                    <Component\n                      label={option.label}\n                      value={attributes[attributeKey]}\n                      options={\n                        values.map &&\n                        values.map(value => {\n                          return {\n                            label: value,\n                            value\n                          };\n                        })\n                      }\n                      onChange={value => updateAttribute(attributeKey, value)}\n                    />\n                  </PanelRow>\n                );\n              })}\n            </PanelBody>\n          )}\n        </InspectorControls>\n        <div className={`${className} stampa-block test-image-new`}>\n          <div\n            className=\"test-image-new\"\n            style={{\n              display: \"grid\",\n              gridTemplateColumns:\n                \"1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr \",\n              gridTemplateRows: \"1fr 1fr 1fr 1fr 1fr 1fr 1fr \",\n              gridGap: \"5px\",\n              height: \"322px\"\n            }}\n          >\n            {/* post-selector */}\n            <div\n              className={`stampa-field stampa-field--post-selector test-image-new__post-selector ${\n                focusedField == \"post-selector\" ? \"focused\" : \"\"\n              }`}\n              style={{\n                display: \"grid\",\n                gridTemplateColumns: \"1fr 1fr 1fr 1fr 1fr 1fr\",\n                gridTemplateRows: \"1fr 1fr 1fr 1fr 1fr\",\n                gridGap: \"5px\",\n                gridRowStart: 2,\n                gridColumnStart: 2,\n                gridRowEnd: 7,\n                gridColumnEnd: 9\n              }}\n              onClick={e => updateFocusedField(e, \"post-selector\")}\n            >\n              <StampaPostSelector\n                postTypes=\"{{stampa.value.post_types}}\"\n                taxonomies=\"{{stampa.value.taxonomies}}\"\n              >\n                {/* post-title */}\n                <div\n                  className={`stampa-field stampa-field--post-title test-image-new__post-title ${\n                    focusedField == \"post-title\" ? \"focused\" : \"\"\n                  }`}\n                  style={{\n                    gridRowStart: 1,\n                    gridColumnStart: 3,\n                    gridRowEnd: 2,\n                    gridColumnEnd: 7\n                  }}\n                  onClick={e => updateFocusedField(e, \"post-title\")}\n                ></div>\n              </StampaPostSelector>\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  },\n\n  /**\n   * Let the content to be rendered with PHP\n   */\n  save: () => null\n});\n","import './blocks/test-image-new';\n"]}